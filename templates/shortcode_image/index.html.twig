{% extends 'base.html.twig' %}


{% block body %}
<h1 class="mb-4">üñºÔ∏è ShortcodeImage √úbersicht</h1>

<table class="table table-bordered align-middle">
    <thead class="table-light">
        <tr>
            <th>Id</th>
            <th>Tag</th>
            <th>Filename</th>
            <th>Path</th>
            <th>Title</th>
            <th>Description</th>
            <th>IsActive</th>
            <th>SortOrder</th>
            <th>CreatedBy</th>
            <th>CreatedAt</th>
            <th>UpdatedAt</th>
            <th>Actions</th>
            <th>Preview</th>
        </tr>
    </thead>
    <tbody>
    {% for shortcode_image in shortcode_images %}
        <tr>
            <td>{{ shortcode_image.id }}</td>
            <td><code>{{ shortcode_image.tag }}</code></td>
            <td>{{ shortcode_image.filename }}</td>
            <td>{{ shortcode_image.path }}</td>
            <td>{{ shortcode_image.title }}</td>
            <td>{{ shortcode_image.description }}</td>
            <td>{{ shortcode_image.isActive ? '‚úÖ' : '‚ùå' }}</td>
            <td>{{ shortcode_image.sortOrder }}</td>
            <td>{{ shortcode_image.createdBy }}</td>
            <td>{{ shortcode_image.createdAt ? shortcode_image.createdAt|date('Y-m-d H:i:s') : '' }}</td>
            <td>{{ shortcode_image.updatedAt ? shortcode_image.updatedAt|date('Y-m-d H:i:s') : '' }}</td>
            <td>
                <a href="{{ path('app_shortcode_image_show', {'id': shortcode_image.id}) }}">{{ '[[shortcode_image tag="Show"]]' | shortcode | raw }}</a>
                <a href="{{ path('app_shortcode_image_edit', {'id': shortcode_image.id}) }}">{{ '[[shortcode_image tag="edit" compact=true]]' | shortcode | raw  }}</a>
                <a href="{{ path('app_shortcode_image_delete', {'id': shortcode_image.id}) }}" class="text-danger">{{ '[[shortcode_image tag="delete" compact=true]]' | shortcode | raw }}</a>
            </td>
            <td>
                {% set twigCode = "{{ '[[shortcode_image tag=\"" ~ shortcode_image.tag ~ "\" compact=true]]' | shortcode | raw }}" %}
                {% set imageUrl = asset(shortcode_image.path ~ '/' ~ shortcode_image.filename) %}
            
                <div class="d-flex flex-column align-items-start">
                    <div class="mb-2">
                        <pre class="mb-1"><code>{{ twigCode }}</code></pre>
                        <button class="btn btn-sm btn-outline-primary"
                                onclick="navigator.clipboard.writeText(`{{ twigCode }}`)">
                            üìã Kopieren
                        </button>
                    </div>
            
                    <div class="text-muted small mb-1">üîç Kompakt-Vorschau (gerendert):</div>
                    <div class="border bg-light rounded p-2 d-inline-block mb-2">
                        {{ '[[shortcode_image tag="' ~ shortcode_image.tag ~ '" compact=true]]' | shortcode | raw }}
                    </div>
            
                    <div class="text-muted small">üñº Direktes Icon:</div>
                    <img src="{{ imageUrl }}" alt="{{ shortcode_image.title }}" style="height: 32px;" class="border rounded" />
                </div>
            </td>
            
            
        </tr>
    {% else %}
        <tr>
            <td colspan="13" class="text-center text-muted">üö´ Keine Eintr√§ge vorhanden</td>
        </tr>
    {% endfor %}
    </tbody>
</table>

<a href="{{ path('app_shortcode_image_new') }}" class="btn btn-success mt-3">‚ûï Neues Shortcode-Bild</a>
{% endblock %}
