{% extends 'base.html.twig' %}

{% block title %}ðŸ§® Project-Statistiken{% endblock %}

{% block body %}
<div class="container my-5 px-2 px-md-0">
    <div class="d-flex justify-content-between align-items-center mb-4 flex-wrap gap-2">
        <h1 class="mb-0">
            <i class="bi bi-graph-up-arrow text-success"></i> Project-Statistiken
        </h1>
        <a href="{{ path('app_project_statistics_new') }}" class="btn btn-success">
            <i class="bi bi-plus-circle"></i> Neue Statistik eintragen
        </a>
    </div>

    {% if project_statistics|length == 0 %}
        <div class="alert alert-info text-center">Noch keine Project-Statistiken gefunden.</div>
    {% endif %}

    <div class="row gy-4">
        {% for stat in project_statistics %}
            <div class="col-12 col-md-6 col-lg-4">
                <div class="card shadow-sm border-0 rounded-4 h-100">
                    <div class="card-body p-4">
                        <div class="d-flex flex-row align-items-center mb-3">
                            <span class="badge bg-primary fs-6 me-2">
                                <i class="bi bi-calendar-check"></i>
                                {{ stat.createdAt ? stat.createdAt|date('d.m.Y H:i') : 'â€“' }}
                            </span>
                            <span class="small text-secondary">ID: #{{ stat.id }}</span>
                        </div>
                        <div class="mb-2">
                            <span class="fw-semibold">Gesamtzeilen: </span>
                            <span class="badge bg-dark fs-6">{{ stat.totalLinesCount|default(0) }}</span>
                        </div>
                        <div class="row g-2 mt-1 mb-2">
                            <div class="col-6"><span class="text-muted small">Entities</span>: <strong>{{ stat.entitiesCount }}</strong></div>
                            <div class="col-6"><span class="text-muted small">Controller</span>: <strong>{{ stat.controllersCount }}</strong></div>
                            <div class="col-6"><span class="text-muted small">Forms</span>: <strong>{{ stat.formsCount }}</strong></div>
                            <div class="col-6"><span class="text-muted small">Routes</span>: <strong>{{ stat.routesCount }}</strong></div>
                            <div class="col-6"><span class="text-muted small">Services</span>: <strong>{{ stat.servicesCount }}</strong></div>
                            <div class="col-6"><span class="text-muted small">Commands</span>: <strong>{{ stat.commandsCount }}</strong></div>
                            <div class="col-6"><span class="text-muted small">Files</span>: <strong>{{ stat.filesCount }}</strong></div>
                            <div class="col-6"><span class="text-muted small">Dirs</span>: <strong>{{ stat.directoriesCount }}</strong></div>
                        </div>
                        <hr class="my-2">
                        <div class="row g-2">
                            <div class="col-4">
                                <span class="text-info small">PHP<br><strong>{{ stat.phpLinesCount|default(0) }}</strong> Zeilen</span>
                            </div>
                            <div class="col-4">
                                <span class="text-warning small">Py<br><strong>{{ stat.pythonLinesCount|default(0) }}</strong> Zeilen</span>
                            </div>
                            <div class="col-4">
                                <span class="text-success small">Shell<br><strong>{{ stat.shellLinesCount|default(0) }}</strong> Zeilen</span>
                            </div>
                        </div>
                        <div class="row g-2 mt-2">
                            <div class="col-4">
                                <span class="small">Shell-Skripte<br><strong>{{ stat.shellScriptsCount|default(0) }}</strong></span>
                            </div>
                            <div class="col-4">
                                <span class="small">Python-Skripte<br><strong>{{ stat.pythonScriptsCount|default(0) }}</strong></span>
                            </div>
                            <div class="col-4">
                                <span class="small text-secondary">Aktionen</span>
                                <div>
                                    <a href="{{ path('app_project_statistics_show', {'id': stat.id}) }}"
                                       class="btn btn-outline-info btn-sm my-1" title="Details anzeigen">
                                        <i class="bi bi-eye"></i>
                                    </a>
                                    <a href="{{ path('app_project_statistics_edit', {'id': stat.id}) }}"
                                       class="btn btn-outline-warning btn-sm my-1" title="Bearbeiten">
                                        <i class="bi bi-pencil"></i>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        {% endfor %}
    </div>
</div>
{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <style>
        .card { transition: box-shadow 0.1s; }
        .card:hover { box-shadow: 0 0.5rem 2rem 0 #246c6b1a; }
        .badge { font-size: 1.05rem; }
        hr.my-2 { border-top: 1px solid #f0f0f0; margin: 8px 0; }
    </style>
{% endblock %}
