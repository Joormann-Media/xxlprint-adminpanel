{% extends 'base.html.twig' %}

{% block body %}
    <h1>ğŸ§© MenÃ¼ Debug Ãœbersicht</h1>

    <h3>ğŸ§ª HARDCODE-CHECK MenÃ¼ 13</h3>
    {% set test_menu = structured.menus|filter(m => m.id == 13) %}
    {{ dump(test_menu|first) }}

    <!-- Strukturierte MenÃ¼s -->
    <div style="flex: 1;">
        <h2>ğŸ§  Struktur laut Service</h2>
        {% for menu in structured.menus %}
            <div style="margin-bottom: 20px; border: 1px solid #000; padding: 10px;">
                <strong>ğŸ“ {{ menu.title }}</strong><br>
                ID: {{ menu.id }}
                {% if menu.items is not empty %}
                    <ul>
                        {% for item in menu.items %}
                            <li>ğŸ”¹ {{ item.title }} ({{ item.route }})</li>
                        {% endfor %}
                    </ul>
                {% else %}
                    <p style="color: grey; margin-left: 15px;">Keine direkten Items</p>
                {% endif %}
                {% if menu.sub_menus is not empty %}
                    <ul>
                        {% for sub in menu.sub_menus %}
                            <li>
                                ğŸ“‚ <strong>{{ sub.title }}</strong>
                                {% if sub.items is not empty %}
                                    <ul>
                                        {% for subItem in sub.items %}
                                            <li>ğŸ”¸ {{ subItem.title }} ({{ subItem.route }})</li>
                                        {% endfor %}
                                    </ul>
                                {% else %}
                                    <p style="color: grey; margin-left: 15px;">Keine Sub-Items</p>
                                {% endif %}
                            </li>
                        {% endfor %}
                    </ul>
                {% else %}
                    <p style="color: grey; margin-left: 15px;">Keine Sub-MenÃ¼s</p>
                {% endif %}
            </div>
        {% else %}
            <p>Keine MenÃ¼s gefunden.</p>
        {% endfor %}
    </div>

    <!-- Debug-Spalte -->
    <div style="flex: 1;">
        <h2>ğŸªµ Debug Log</h2>
        <ul>
            {% for log in structured.debug %}
                <li>
                    <strong>{{ log.context }}</strong><br>
                    {% for key, val in log %}
                    {% if key != 'context' %}
                        {{ key }}: 
                        {% if val is iterable %}
                            <pre>{{ dump(val) }}</pre>
                        {% else %}
                            {{ val }}
                        {% endif %}
                        <br>
                    {% endif %}
                {% endfor %}
                
                </li>
            {% endfor %}
        </ul>
    </div>

   
    <h2>Debug Log:</h2>
    <ul>
        {% for log in debug %}
            <li>{{ log.context }} - {{ log.title }} ({{ log.id }})</li>
        {% endfor %}
    </ul>


{% endblock %}