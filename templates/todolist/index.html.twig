{% extends 'base.html.twig' %}

{% block title %}Todolist Übersicht{% endblock %}

{% block body %}
<div class="container py-4">
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h1 class="fs-3 mb-0"><i class="bi bi-list-task me-2"></i> Todolist</h1>
        <a href="{{ path('app_todolist_new') }}" class="btn btn-success rounded-2 shadow-sm">
            <i class="bi bi-plus-lg"></i> Neu anlegen
        </a>
    </div>

    <div class="row g-3">
        {% for todolist in todolists %}
            <div class="col-12 col-md-6 col-xl-4">
                <div class="card shadow-sm border-0 h-100">
                    <div class="card-header bg-light d-flex align-items-center justify-content-between">
                        <span class="fw-bold text-primary">
                            <i class="bi bi-check2-square me-1"></i>{{ todolist.name }}
                        </span>
                        {% set status = todolist.status|lower %}
                        {% set badge_class = status == 'done' 
                            ? 'bg-success'
                            : (status == 'wip' 
                                ? 'bg-warning text-dark'
                                : 'bg-danger') %}
                        {% set badge_icon = status == 'done'
                            ? 'bi bi-check-circle-fill'
                            : (status == 'wip'
                                ? 'bi bi-exclamation-circle-fill'
                                : 'bi bi-x-circle-fill') %}
                        <span class="badge {{ badge_class }} px-3 py-2 rounded-pill d-flex align-items-center gap-1 fs-6">
                            <i class="{{ badge_icon }}"></i>
                            {{ status == 'done' ? 'Erledigt' : (status == 'wip' ? 'In Arbeit' : 'Offen') }}
                        </span>
                    </div>
                    <div class="card-body">
                        <div class="mb-2 small text-muted">
                            <strong>ID:</strong> {{ todolist.id }}
                        </div>
                        <div class="mb-2">
                            <strong>Beschreibung:</strong><br>
                            <span class="text-break">{{ todolist.description|default('-') }}</span>
                        </div>
                        <div class="mb-2">
                            <strong>Notes:</strong><br>
                            <span class="text-break">{{ todolist.notes|default('-') }}</span>
                        </div>
                    </div>
                    <div class="card-footer bg-light border-0 d-flex justify-content-end gap-2">
                        <a href="{{ path('app_todolist_show', {'id': todolist.id}) }}" class="btn btn-outline-primary btn-sm">
                            <i class="bi bi-eye"></i> Anzeigen
                        </a>
                        <a href="{{ path('app_todolist_edit', {'id': todolist.id}) }}" class="btn btn-outline-secondary btn-sm">
                            <i class="bi bi-pencil"></i> Bearbeiten
                        </a>
                    </div>
                </div>
            </div>
        {% else %}
            <div class="col-12">
                <div class="alert alert-info text-center mb-0">
                    <i class="bi bi-emoji-frown"></i> Keine Einträge gefunden.
                </div>
            </div>
        {% endfor %}
    </div>
</div>
{% endblock %}
