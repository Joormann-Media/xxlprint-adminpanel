{% extends 'base.html.twig' %}


{% block body %}
    <div class="container py-4">
        <div class="bg-light border rounded p-4 mb-4 shadow-sm">
            <h2 class="mb-0">ðŸ“¢ PopUp Category Manager</h2>
            <p class="text-muted">Verwalte die verfÃ¼gbaren PopUp-Kategorien im System.</p>
        </div>

        <div class="d-flex justify-content-between align-items-center mb-4 flex-wrap gap-2">
            <a href="{{ path('app_pop_up_category_new') }}" class="btn btn-success">
                <i class="bi bi-plus-circle me-1"></i>Neue PopUp Kategorie erstellen
            </a>
        </div>

        {% if pop_up_categories is not empty %}
            <div class="table-responsive">
                <table class="table table-striped table-bordered table-hover">
                    <thead class="table-light">
                        <tr>
                            <th>Id</th>
                            <th>CategoryName</th>
                            <th>ErstelltAm</th>
                            <th>ErstelltVon</th>
                            <th>Description</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                    {% for pop_up_category in pop_up_categories %}
                        <tr>
                            <td>{{ pop_up_category.id }}</td>
                            <td>{{ pop_up_category.categoryName }}</td>
                            <td>{{ pop_up_category.erstelltAm ? pop_up_category.erstelltAm|date('Y-m-d H:i:s') : 'â€“' }}</td>
                            <td>{{ pop_up_category.erstelltVon }}</td>
                            <td>{{ pop_up_category.description|default('Keine Beschreibung')|raw }}</td>
                            <td>
                                <a href="{{ path('app_pop_up_category_show', {'id': pop_up_category.id}) }}" class="btn btn-sm btn-outline-info">
                                    <i class="bi bi-eye"></i> Show
                                </a>
                                <a href="{{ path('app_pop_up_category_edit', {'id': pop_up_category.id}) }}" class="btn btn-sm btn-outline-warning">
                                    <i class="bi bi-pencil"></i> Edit
                                </a>
                                <form method="post" action="{{ path('app_pop_up_category_delete', {'id': pop_up_category.id}) }}" style="display:inline;" onsubmit="return confirm('MÃ¶chtest du diese Kategorie wirklich lÃ¶schen?');">
                                    <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ pop_up_category.id) }}">
                                    <button class="btn btn-sm btn-outline-danger" type="submit">
                                        <i class="bi bi-trash"></i> Delete
                                    </button>
                                </form>
                            </td>
                        </tr>
                    {% else %}
                        <tr>
                            <td colspan="6" class="text-center">ðŸš« Keine Kategorien gefunden</td>
                        </tr>
                    {% endfor %}
                    </tbody>
                </table>
            </div>
        {% else %}
            <div class="alert alert-warning text-center mt-4">
                ðŸš« Es wurden noch keine PopUp-Kategorien angelegt.
            </div>
        {% endif %}
    </div>
{% endblock %}
