{# templates/ai_manager/show.html.twig #}
{% extends 'base.html.twig' %}

{% block title %}AI Details – {{ ai_manager.aiName }}{% endblock %}

{% block body %}
<div class="container mt-4">
    <div class="card shadow-lg border-0 rounded-3 mb-5">
        <div class="card-header bg-info text-white d-flex align-items-center gap-3">
            {% if ai_manager.aiAvatar %}
                <img src="{{ asset(ai_manager.aiAvatar) }}" alt="Avatar" class="rounded-circle me-2" style="width:48px;height:48px;object-fit:cover;">
            {% else %}
                <i class="bi bi-cpu-fill fs-2"></i>
            {% endif %}
            <div>
                <h2 class="mb-0">{{ ai_manager.aiName }}</h2>
                <small class="text-light-emphasis">{{ ai_manager.aiCategory|upper }}</small>
            </div>
        </div>
        <div class="card-body">
            <dl class="row">
                <dt class="col-sm-3">Modell</dt>
                <dd class="col-sm-9">{{ ai_manager.aiModel }}</dd>

                <dt class="col-sm-3">Beschreibung</dt>
                <dd class="col-sm-9">{{ ai_manager.aiDescription }}</dd>

                <dt class="col-sm-3">Setup</dt>
                <dd class="col-sm-9"><pre class="mb-0">{{ ai_manager.aiSetup }}</pre></dd>

                <dt class="col-sm-3">Pfad</dt>
                <dd class="col-sm-9"><code>{{ ai_manager.aiPath }}</code></dd>

                <dt class="col-sm-3">Host</dt>
                <dd class="col-sm-9">{{ ai_manager.aiHost }}</dd>

                <dt class="col-sm-3">Health-URL</dt>
                <dd class="col-sm-9">{{ ai_manager.aiHealthUrl }}</dd>

                <dt class="col-sm-3">Status</dt>
                <dd class="col-sm-9">
                    <span class="badge bg-{{ ai_manager.aiStatus == 'active' ? 'success' : (ai_manager.aiStatus == 'maintenance' ? 'warning' : 'danger') }}">
                        {{ ai_manager.aiStatus|upper }}
                    </span>
                </dd>

                <dt class="col-sm-3">Letzter Check</dt>
                <dd class="col-sm-9">
                    {{ ai_manager.aiLastCheckedAt ? ai_manager.aiLastCheckedAt|date('d.m.Y H:i') : '–' }}
                    {% if ai_manager.aiLastResponseMs %}<span class="ms-2 badge bg-info">Antwort: {{ ai_manager.aiLastResponseMs }} ms</span>{% endif %}
                </dd>

                <dt class="col-sm-3">Fehler</dt>
                <dd class="col-sm-9 text-danger">{{ ai_manager.aiLastError }}</dd>

                <dt class="col-sm-3">API-Token</dt>
                <dd class="col-sm-9"><code>{{ ai_manager.aiApiToken }}</code></dd>

                <dt class="col-sm-3">Angelegt</dt>
                <dd class="col-sm-9">{{ ai_manager.aiCreated ? ai_manager.aiCreated|date('d.m.Y H:i') : '–' }}</dd>

                <dt class="col-sm-3">Maintainer</dt>
                <dd class="col-sm-9">
                    {{ ai_manager.aiMaintainer ? ai_manager.aiMaintainer.username : '–' }}
                </dd>
                <dt class="col-sm-3">Minimalrolle</dt>
                <dd class="col-sm-9">
                    {{ ai_manager.aiMinrole ? ai_manager.aiMinrole.roleName : '–' }}
                </dd>
            </dl>
        </div>
        <div class="card-footer bg-light text-end">
            <a href="{{ path('app_ai_manager_index') }}" class="btn btn-outline-secondary">
                <i class="bi bi-arrow-left"></i> Zurück
            </a>
            <a href="{{ path('app_ai_manager_edit', {'id': ai_manager.id}) }}" class="btn btn-primary ms-2">
                <i class="bi bi-pencil"></i> Bearbeiten
            </a>
        </div>
    </div>
</div>
{% endblock %}
